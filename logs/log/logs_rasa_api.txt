/home/huydq/anaconda3/envs/langchain/lib/python3.10/site-packages/rasa/core/tracker_store.py:1044: MovedIn20Warning: Deprecated API features detected! These feature(s) are not compatible with SQLAlchemy 2.0. To prevent incompatible upgrades prior to updating applications, ensure requirements files are pinned to "sqlalchemy<2.0". Set environment variable SQLALCHEMY_WARN_20=1 to show all deprecation warnings.  Set environment variable SQLALCHEMY_SILENCE_UBER_WARNING=1 to silence this message. (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
  Base: DeclarativeMeta = declarative_base()
/home/huydq/anaconda3/envs/langchain/lib/python3.10/site-packages/rasa/shared/utils/validation.py:134: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
  import pkg_resources
/home/huydq/anaconda3/envs/langchain/lib/python3.10/site-packages/pkg_resources/__init__.py:2832: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('mpl_toolkits')`.
Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
  declare_namespace(pkg)
/home/huydq/anaconda3/envs/langchain/lib/python3.10/site-packages/pkg_resources/__init__.py:2832: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('ruamel')`.
Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
  declare_namespace(pkg)
/home/huydq/anaconda3/envs/langchain/lib/python3.10/site-packages/sanic_cors/extension.py:39: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.
  SANIC_VERSION = LooseVersion(sanic_version)
2024-05-09 14:46:39 INFO     root  - Starting Rasa server on http://0.0.0.0:5005
2024-05-09 14:46:40 INFO     rasa.core.processor  - Loading model models/20240509-095717-chunky-sum.tar.gz...
2024-05-09 14:47:28 WARNING  rasa.shared.utils.common  - The UnexpecTED Intent Policy is currently experimental and might change or be removed in the future ðŸ”¬ Please share your feedback on it in the forum (https://forum.rasa.com) to help us make this feature ready for production.
2024-05-09 14:47:39 INFO     root  - Rasa server is up and running.
2024-05-09 17:12:23 ERROR    rasa.core.channels.rest  - {"text": null, "event": "rest.message.received.failure", "level": "error", "exception": [{"exc_type": "GraphComponentException", "exc_value": "Error running graph component for node run_RegexMessageHandler.", "syntax_error": null, "is_cause": false, "frames": [{"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/channels/rest.py", "lineno": 162, "name": "receive", "line": "", "locals": {"request": "<Request: POST /webhooks/rest/webhook>", "sender_id": "test", "text": "None", "should_use_stream": "False", "input_channel": "rest", "metadata": "None", "collector": "<rasa.core.channels.channel.CollectingOutputChannel object at 0x7f78da41f790>", "on_new_message": "<function register.<locals>.handler at 0x7f7936df6d40>", "self": "<rasa.core.channels.rest.RestInput object at 0x7f7936d5b1c0>"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/channels/channel.py", "lineno": 89, "name": "handler", "line": "", "locals": {"message": "<rasa.core.channels.channel.UserMessage object at 0x7f78d8b64520>", "app": "Sanic(name=\"rasa_server\")"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/agent.py", "lineno": 419, "name": "handle_message", "line": "", "locals": {"self": "<rasa.core.agent.Agent object at 0x7f7936bdded0>", "message": "<rasa.core.channels.channel.UserMessage object at 0x7f78d8b64520>"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/processor.py", "lineno": 157, "name": "handle_message", "line": "", "locals": {"self": "<rasa.core.processor.MessageProcessor object at 0x7f7936bdf7f0>", "message": "<rasa.core.channels.channel.UserMessage object at 0x7f78d8b64520>"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/processor.py", "lineno": 466, "name": "log_message", "line": "", "locals": {"self": "<rasa.core.processor.MessageProcessor object at 0x7f7936bdf7f0>", "message": "<rasa.core.channels.channel.UserMessage object at 0x7f78d8b64520>", "should_save_tracker": "False", "tracker": "<rasa.shared.core.trackers.DialogueStateTracker object at 0x7f78d8cacac0>"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/processor.py", "lineno": 797, "name": "_handle_message_with_tracker", "line": "", "locals": {"self": "<rasa.core.processor.MessageProcessor object at 0x7f7936bdf7f0>", "message": "<rasa.core.channels.channel.UserMessage object at 0x7f78d8b64520>", "tracker": "<rasa.shared.core.trackers.DialogueStateTracker object at 0x7f78d8cacac0>"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/processor.py", "lineno": 724, "name": "parse_message", "line": "", "locals": {"self": "<rasa.core.processor.MessageProcessor object at 0x7f7936bdf7f0>", "message": "<rasa.core.channels.channel.UserMessage object at 0x7f78d8b64520>", "tracker": "<rasa.shared.core.trackers.DialogueStateTracker object at 0x7f78d8cacac0>", "only_output_properties": "True"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/core/processor.py", "lineno": 774, "name": "_parse_message_with_graph", "line": "", "locals": {"self": "<rasa.core.processor.MessageProcessor object at 0x7f7936bdf7f0>", "message": "<rasa.core.channels.channel.UserMessage object at 0x7f78d8b64520>", "tracker": "<rasa.shared.core.trackers.DialogueStateTracker object at 0x7f78d8cacac0>", "only_output_properties": "True"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/engine/runner/dask.py", "lineno": 101, "name": "run", "line": "", "locals": {"self": "<rasa.engine.runner.dask.DaskGraphRunner object at 0x7f7936bddf00>", "inputs": "\"{'__message__': [<rasa.core.channels.channel.UserMessage object at 0x7f78d8b6452\"+94", "targets": "['run_RegexMessageHandler']", "run_targets": "['run_RegexMessageHandler']", "minimal_schema": "\"GraphSchema(nodes={'nlu_message_converter': SchemaNode(needs={'messages': '__mes\"+4246", "run_graph": "\"{'nlu_message_converter': (<rasa.engine.graph.GraphNode object at 0x7f7936bdece0\"+1459"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/local.py", "lineno": 557, "name": "get_sync", "line": "", "locals": {"dsk": "\"{'nlu_message_converter': (<rasa.engine.graph.GraphNode object at 0x7f7936bdece0\"+1459", "keys": "['run_RegexMessageHandler']", "kwargs": "{}"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/local.py", "lineno": 500, "name": "get_async", "line": "", "locals": {"result": "['run_RegexMessageHandler']", "cache": "None", "rerun_exceptions_locally": "False", "raise_exception": "<function reraise at 0x7f79375256c0>", "callbacks": "()", "chunksize": "1", "kwargs": "{}", "result_flat": "{'run_RegexMessageHandler'}", "results": "{'run_RegexMessageHandler'}", "_": "()", "posttask_cbs": "()", "started_cbs": "[]", "succeeded": "False", "keyorder": "\"{'__message__': 0, 'nlu_message_converter': 1, 'run_WhitespaceTokenizer0': 2, 'r\"+319", "fire_tasks": "<function get_async.<locals>.fire_tasks at 0x7f78dbdd75b0>", "key": "domain_provider", "res_info": "\"(('domain_provider', Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 en\"+23", "failed": "False", "res": "\"('domain_provider', Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 ent\"+15", "worker_id": "None", "dsk": "\"{'nlu_message_converter': (<rasa.engine.graph.GraphNode object at 0x7f7936bdece0\"+1459", "dumps": "<function identity at 0x7f7937525750>", "get_id": "<function default_get_id at 0x7f79375255a0>", "loads": "<function identity at 0x7f7937525750>", "num_workers": "1", "pack_exception": "<function default_pack_exception at 0x7f7937525630>", "pretask_cbs": "()", "queue": "<queue.Queue object at 0x7f78d8a07cd0>", "state": "\"{'dependencies': {'nlu_message_converter': {'__message__'}, 'run_WhitespaceToken\"+2547", "submit": "'<bound method SynchronousExecutor.submit of <dask.local.SynchronousExecutor obje'+22"}}, {"filename": "/data/anaconda3/envs/langchain/lib/python3.10/concurrent/futures/_base.py", "lineno": 451, "name": "result", "line": "", "locals": {"self": "None", "timeout": "None"}}, {"filename": "/data/anaconda3/envs/langchain/lib/python3.10/concurrent/futures/_base.py", "lineno": 403, "name": "__get_result", "line": "", "locals": {"self": "None"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/local.py", "lineno": 542, "name": "submit", "line": "", "locals": {"self": "<dask.local.SynchronousExecutor object at 0x7f793770a650>", "fn": "<function batch_execute_tasks at 0x7f7937525360>", "args": "\"([('run_RegexMessageHandler', ((<rasa.engine.graph.GraphNode object at 0x7f7936a\"+484", "kwargs": "{}", "fut": "<Future at 0x7f78d8a073a0 state=finished raised GraphComponentException>"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/local.py", "lineno": 238, "name": "batch_execute_tasks", "line": "", "locals": {"it": "\"[('run_RegexMessageHandler', ((<rasa.engine.graph.GraphNode object at 0x7f7936a0\"+481"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/local.py", "lineno": 238, "name": "<listcomp>", "line": "", "locals": {".0": "<list_iterator object at 0x7f78d8a065c0>", "a": "\"('run_RegexMessageHandler', ((<rasa.engine.graph.GraphNode object at 0x7f7936a01\"+479"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/local.py", "lineno": 229, "name": "execute_task", "line": "", "locals": {"key": "run_RegexMessageHandler", "task_info": "\"((<rasa.engine.graph.GraphNode object at 0x7f7936a01660>, 'run_FallbackClassifie\"+274", "dumps": "<function identity at 0x7f7937525750>", "loads": "<function identity at 0x7f7937525750>", "get_id": "<function default_get_id at 0x7f79375255a0>", "pack_exception": "<function default_pack_exception at 0x7f7937525630>", "task": "\"(<rasa.engine.graph.GraphNode object at 0x7f7936a01660>, 'run_FallbackClassifier\"+22", "data": "\"{'run_FallbackClassifier8': ('run_FallbackClassifier8', [<rasa.shared.nlu.traini\"+168"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/local.py", "lineno": 224, "name": "execute_task", "line": "", "locals": {"key": "run_RegexMessageHandler", "task_info": "\"((<rasa.engine.graph.GraphNode object at 0x7f7936a01660>, 'run_FallbackClassifie\"+274", "dumps": "<function identity at 0x7f7937525750>", "loads": "<function identity at 0x7f7937525750>", "get_id": "<function default_get_id at 0x7f79375255a0>", "pack_exception": "<function default_pack_exception at 0x7f7937525630>", "task": "\"(<rasa.engine.graph.GraphNode object at 0x7f7936a01660>, 'run_FallbackClassifier\"+22", "data": "\"{'run_FallbackClassifier8': ('run_FallbackClassifier8', [<rasa.shared.nlu.traini\"+168"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/dask/core.py", "lineno": 119, "name": "_execute_task", "line": "", "locals": {"arg": "\"(<rasa.engine.graph.GraphNode object at 0x7f7936a01660>, 'run_FallbackClassifier\"+22", "dsk": "None", "func": "<rasa.engine.graph.GraphNode object at 0x7f7936a01660>", "args": "('run_FallbackClassifier8', 'domain_provider')", "cache": "\"{'run_FallbackClassifier8': ('run_FallbackClassifier8', [<rasa.shared.nlu.traini\"+168"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/engine/graph.py", "lineno": 503, "name": "__call__", "line": "", "locals": {"self": "<rasa.engine.graph.GraphNode object at 0x7f7936a01660>", "inputs_from_previous_nodes": "\"(('run_FallbackClassifier8', [<rasa.shared.nlu.training_data.message.Message obj\"+122", "received_inputs": "\"{'run_FallbackClassifier8': [<rasa.shared.nlu.training_data.message.Message obje\"+118", "i": "\"('domain_provider', Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 ent\"+15", "node_name": "domain_provider", "node_output": "Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 entities, 0 forms", "kwargs": "\"{'messages': [<rasa.shared.nlu.training_data.message.Message object at 0x7f78d8a\"+94", "input_name": "domain", "input_provider_node_name": "domain_provider", "input_hook_outputs": "[]", "run_kwargs": "\"{'messages': [<rasa.shared.nlu.training_data.message.Message object at 0x7f78d8a\"+94"}}]}, {"exc_type": "AttributeError", "exc_value": "'NoneType' object has no attribute 'strip'", "syntax_error": null, "is_cause": true, "frames": [{"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/engine/graph.py", "lineno": 496, "name": "__call__", "line": "", "locals": {"self": "<rasa.engine.graph.GraphNode object at 0x7f7936a01660>", "inputs_from_previous_nodes": "\"(('run_FallbackClassifier8', [<rasa.shared.nlu.training_data.message.Message obj\"+122", "received_inputs": "\"{'run_FallbackClassifier8': [<rasa.shared.nlu.training_data.message.Message obje\"+118", "i": "\"('domain_provider', Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 ent\"+15", "node_name": "domain_provider", "node_output": "Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 entities, 0 forms", "kwargs": "\"{'messages': [<rasa.shared.nlu.training_data.message.Message object at 0x7f78d8a\"+94", "input_name": "domain", "input_provider_node_name": "domain_provider", "input_hook_outputs": "[]", "run_kwargs": "\"{'messages': [<rasa.shared.nlu.training_data.message.Message object at 0x7f78d8a\"+94"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/nlu/classifiers/regex_message_handler.py", "lineno": 51, "name": "process", "line": "", "locals": {"messages": "[<rasa.shared.nlu.training_data.message.Message object at 0x7f78d8a078e0>]", "domain": "Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 entities, 0 forms", "self": "'<rasa.nlu.classifiers.regex_message_handler.RegexMessageHandler object at 0x7f79'+9"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/nlu/classifiers/regex_message_handler.py", "lineno": 52, "name": "<listcomp>", "line": "", "locals": {".0": "<list_iterator object at 0x7f78d8a06230>", "message": "<rasa.shared.nlu.training_data.message.Message object at 0x7f78d8a078e0>", "domain": "Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 entities, 0 forms", "self": "'<rasa.nlu.classifiers.regex_message_handler.RegexMessageHandler object at 0x7f79'+9"}}, {"filename": "/home/aiai01/.local/lib/python3.10/site-packages/rasa/shared/core/training_data/story_reader/yaml_story_reader.py", "lineno": 619, "name": "unpack_regex_message", "line": "", "locals": {"message": "<rasa.shared.nlu.training_data.message.Message object at 0x7f78d8a078e0>", "domain": "Domain: 47 actions, 38 intents, 31 responses, 1 slots, 2 entities, 0 forms", "entity_extractor_name": "RegexMessageHandler"}}]}]}
[93m/home/aiai01/.local/lib/python3.10/site-packages/rasa/shared/utils/io.py:99: UserWarning: Parsed an entity 'cust_sex' which is not defined in the domain. Please make sure all entities are listed in the domain.
  More info at https://rasa.com/docs/rasa/domain
[0m